<ActionList>
	<Actions>
		<Action Name="Life_Staff_Cast_Primary" FragmentName="Magic_Staff_Cast_Primary_C1">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" FragmentName="" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Targeting StickyLock Check">
					<IfCondition>
						<And>
							<Not>
								<IfCameraStickyLockActive/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ForceCameraLock>
							<Default OnEnter="Disable" OnExit="NoEffect"/>
						</ForceCameraLock>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse Comment="Unset AttackAction on CanTransition" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Basic Projectile">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<Not>
								<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_NoManaOnBasic"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_LifeStaff_Light_Projectile"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Basic Projectile No Mana">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_NoManaOnBasic"/>
							<Not>
								<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_HealOnLight"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_LifeStaff_Light_Projectile_NoMana"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Basic Projectile No Mana">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_HealOnLight"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_LifeStaff_Light_Projectile_Heal"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Life_Staff_Cast_Heavy" FragmentName="Magic_Staff_Cast_Primary_C2">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Targeting StickyLock Check">
					<IfCondition>
						<And>
							<Not>
								<IfCameraStickyLockActive/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<ForceCameraLock>
							<Default OnEnter="Disable" OnExit="NoEffect"/>
						</ForceCameraLock>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse Comment="Unset AttackAction on CanTransition" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Basic Projectile">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<Not>
								<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_NoManaOnBasic"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_LifeStaff_Heavy_Projectile"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Basic Projectile No Mana">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_NoManaOnBasic"/>
							<Not>
								<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_RemoveOnHeavy"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_LifeStaff_Heavy_Projectile_NoMana"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Basic Projectile No Mana">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_RemoveOnHeavy"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_LifeStaff_Heavy_Projectile_Remove"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_HealingWave" FragmentName="Ability_Life_Staff_HealingWave">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfInput InputName="self_target"/>
						</Not>
					</And>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_ScaredGround" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_HealingWave" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<And>
							<IfAbilityActive AbilityName="WaveManaReduce10prcnt"/>
							<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="Celestial_Heal_AoE_Staff_Mana_Upgrade" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</And>
					</Or>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave_Aim"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave_Loop"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave_SelfLoop"/>
					</Not>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfMannequinMarker MarkerName="Magic_AimExit"/>
					<IfMannequinTag TagName="Prone_Desired"/>
					<IfMannequinTag TagName="Prone"/>
					<IfMannequinTag TagName="Crouch"/>
					<IsSilenced/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_ScaredGround" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<ForceCameraLock>
					<Default OnEnter="Enable" OnExit="NoEffect" MaxLockRange="25" TargetedSpellName="Spell_LifeStaff_SacredGround"/>
				</ForceCameraLock>
				<IfThenElse ResetWhenReinstalled="true" Comment="Targeted Healing Exit">
					<IfCondition>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
					</IfCondition>
					<ThenActivity>
						<IfThenElse Comment="Targeting StickyLock Check">
							<IfCondition>
								<Not>
									<IfCameraStickyLockActive/>
								</Not>
							</IfCondition>
							<ThenActivity>
								<ForceCameraLock>
									<Default OnEnter="Disable" OnExit="NoEffect"/>
								</ForceCameraLock>
							</ThenActivity>
						</IfThenElse>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Input to Cast">
					<IfCondition>
						<And>
							<Or>
								<IfInput InputName="attack_shoot"/>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround"/>
								<And>
									<IfCameraLockActive/>
									<Or>
										<IfInput InputName="camera_lock_target_group1"/>
										<And>
											<IfInGroup/>
											<Or>
												<IfInput InputName="camera_lock_target_group2"/>
												<IfInput InputName="camera_lock_target_group3"/>
												<IfInput InputName="camera_lock_target_group4"/>
												<IfInput InputName="camera_lock_target_group5"/>
											</Or>
										</And>
									</Or>
								</And>
							</Or>
							<IfMannequinMarker MarkerName="Magic_IsReady_Heal"/>
							<Not>
								<Or>
									<IfInput InputName="aim_draw"/>
									<IfInput InputName="aim_draw_press"/>
									<IfInput InputName="block"/>
									<IfInput InputName="block_depressed"/>
								</Or>
							</Not>
							<IfMannequinTag TagName="Heal"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<IfThenElse ResetWhenReinstalled="false" Comment="Check Target Range">
							<IfCondition>
								<And>
									<IfCameraLockActive/>
									<Not>
										<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_SacredGround"/>
									</Not>
								</And>
							</IfCondition>
							<ThenActivity>
								<ShowUINotification>
									<Default type="Minor" text="@inv_OutOfRangeNotification"/>
								</ShowUINotification>
							</ThenActivity>
							<ElseActivity>
								<Group>
									<DisableCameraLockTargetChange OnEnter="Disable" OnExit="NoAction"/>
									<IfThenElse ResetWhenReinstalled="false" Comment="Check ScaredGround_Base SPELL input">
										<IfCondition>
											<And>
												<IfExternalCondition ConditionName="Condition_Lifestaff_ScaredGround_Base"/>
											</And>
										</IfCondition>
										<ThenActivity>
											<CastSpellRaycast SpellName="Spell_LifeStaff_SacredGround"/>
										</ThenActivity>
									</IfThenElse>
									<IfThenElse ResetWhenReinstalled="false" Comment="Check ScaredGround_Upgrade SPELL input">
										<IfCondition>
											<And>
												<IfExternalCondition ConditionName="Condition_Lifestaff_ScaredGround_Upgrade"/>
											</And>
										</IfCondition>
										<ThenActivity>
											<CastSpellRaycast SpellName="Spell_LifeStaff_SacredGround_Upgrade"/>
										</ThenActivity>
									</IfThenElse>
									<IfThenElse ResetWhenReinstalled="false" Comment="Check ScaredGround_Upgrade2 SPELL input">
										<IfCondition>
											<And>
												<IfExternalCondition ConditionName="Condition_Lifestaff_ScaredGround_Upgrade2"/>
											</And>
										</IfCondition>
										<ThenActivity>
											<CastSpellRaycast SpellName="Spell_LifeStaff_SacredGround_Upgrade2"/>
										</ThenActivity>
									</IfThenElse>
								</Group>
							</ElseActivity>
						</IfThenElse>
					</ThenActivity>
				</IfThenElse>
				<DisableCameraLockTargetChange OnEnter="NoAction" OnExit="Enable"/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Aim Tag">
					<IfCondition>
						<IfMannequinMarker MarkerName="UnsetAimTag"/>
					</IfCondition>
					<ThenActivity>
						<group Comment="LifeStaff unAim">
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Aim" OnEnter="Unset" OnExit="Unset" DelayTimer="0.0"/>
							</SetMannequinTag>
							<ExecuteAudioTrigger ResetWhenReinstalled="true" RunOnRemoteClients="true" IgnoreDataChanges="false">
								<Default AudioTriggerName="stop_staff_life_aim" ForceStopFxOnDataChange="false" ExecuteOnLocalPlayer="true" ExecuteOnRemotePlayer="true" AttachmentJointRtpcName="" AttachmentJoint="" AttachToEntity="true"/>
							</ExecuteAudioTrigger>
						</group>
					</ThenActivity>
					<ElseActivity>
						<group Comment="LifeStaff Aim">
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Aim" OnEnter="Set" OnExit="Unset" DelayTimer="0.0"/>
							</SetMannequinTag>
						</group>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle HEALWAVE Targeting Indicator">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Heal"/>
							<IfMannequinTag TagName="Heal"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_heal_targeting.dynamicslice" SpellName="Spell_LifeStaff_SacredGround"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Camera Relative Facing Logic">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="TurnInPlaceDisabled"/>
							<Not>
								<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Sprint"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="9,9,9" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="true" Comment="Show Broken Los Indicator">
					<IfCondition>
						<IfSpellLosFailClient/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ShowUINotification>
								<Default type="Minor" text="@inv_TargetOutsideLos"/>
							</ShowUINotification>
							<DisableCameraLockTargetChange OnEnter="Enable" OnExit="Enable"/>
						</Group>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_HealingWave_Loop" FragmentName="Ability_Life_Staff_HealingWave_Loop">
			<ActivationCondition>
				<And>
					<IfMannequinTag TagName="MagicStaff"/>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_ScaredGround" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<And>
						<Or>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave"/>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave_Aim"/>
						</Or>
						<ActionConditionSpellSpawnLocationState Value="RaycastPassed"/>
						<IfMannequinMarker MarkerName="Magic_IsReadying_Heal"/>
					</And>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave_Loop"/>
					</Not>
					<And>
						<Not>
							<Or>
								<IfInput InputName="aim_draw"/>
								<IfInput InputName="aim_draw_press"/>
								<IfInput InputName="block"/>
								<IfInput InputName="block_depressed"/>
							</Or>
						</Not>
						<IfMannequinTag TagName="Heal"/>
					</And>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_HealingWave" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<Or>
							<IsSilenced/>
							<IfFragmentPlaying UseHostActionFragment="true"/>
							<IfInput InputName="Placing_Building"/>
						</Or>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<And>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave_Loop"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_ScaredGround" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_ScaredGround"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check LoS and range on target change">
					<IfCondition>
						<And>
							<IfCameraLockTargetChange/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<IfThenElse ResetWhenReinstalled="false" Comment="Check Target Range">
								<IfCondition>
									<And>
										<IfCameraLockActive/>
										<Not>
											<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_SacredGround"/>
											&quot;/&gt;
                                        
										</Not>
									</And>
								</IfCondition>
								<ThenActivity>
									<Group>
										<ShowUINotification>
											<Default type="Minor" text="@inv_OutOfRangeNotification"/>
										</ShowUINotification>
										<ChangeActionFragment ResetWhenReinstalled="true">
											<Default UseDefaultFragment="false" FragmentName="Ability_Life_Staff_HealingWave_Outro"/>
										</ChangeActionFragment>
									</Group>
								</ThenActivity>
								<ElseActivity>
									<Group>
										<IfThenElse ResetWhenReinstalled="false" Comment="Check ScaredGround_Base SPELL input">
											<IfCondition>
												<And>
													<IfExternalCondition ConditionName="Condition_Lifestaff_ScaredGround_Base"/>
												</And>
											</IfCondition>
											<ThenActivity>
												<CastSpellRaycast SpellName="Spell_LifeStaff_SacredGround"/>
											</ThenActivity>
										</IfThenElse>
										<IfThenElse ResetWhenReinstalled="false" Comment="Check ScaredGround_Upgrade SPELL input">
											<IfCondition>
												<And>
													<IfExternalCondition ConditionName="Condition_Lifestaff_ScaredGround_Upgrade"/>
												</And>
											</IfCondition>
											<ThenActivity>
												<CastSpellRaycast SpellName="Spell_LifeStaff_SacredGround_Upgrade"/>
											</ThenActivity>
										</IfThenElse>
										<IfThenElse ResetWhenReinstalled="false" Comment="Check ScaredGround_Upgrade2 SPELL input">
											<IfCondition>
												<And>
													<IfExternalCondition ConditionName="Condition_Lifestaff_ScaredGround_Upgrade2"/>
												</And>
											</IfCondition>
											<ThenActivity>
												<CastSpellRaycast SpellName="Spell_LifeStaff_SacredGround_Upgrade2"/>
											</ThenActivity>
										</IfThenElse>
									</Group>
								</ElseActivity>
							</IfThenElse>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="true" Comment="Show Broken Los Indicator">
					<IfCondition>
						<IfSpellLosFailClient/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ShowUINotification>
								<Default type="Minor" text="@inv_TargetOutsideLos"/>
							</ShowUINotification>
							<DisableCameraLockTargetChange OnEnter="Enable" OnExit="Enable"/>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_HealingWave_SelfLoop" FragmentName="Ability_Life_Staff_HealingWave_SelfLoop">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<IfInput InputName="self_target"/>
					</And>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_ScaredGround" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_HealingWave" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<And>
							<IfAbilityActive AbilityName="WaveManaReduce10prcnt"/>
							<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="Celestial_Heal_AoE_Staff_Mana_Upgrade" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</And>
					</Or>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_ScaredGround" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<IfThenElse Comment="Targeting StickyLock Check">
					<IfCondition>
						<Not>
							<IfCameraStickyLockActive/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ForceCameraLock>
							<Default OnEnter="Disable" OnExit="NoEffect"/>
						</ForceCameraLock>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_ScaredGround" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_ScaredGround"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_TouchOfLife" FragmentName="Ability_Life_Staff_TouchOfLife">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfInput InputName="self_target"/>
						</Not>
					</And>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_DivineEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_TouchOfLife" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<And>
							<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_TouchOfLife_Mana_Upgrade" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
						</And>
					</Or>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife_Aim"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife_Cast"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife_SelfCast"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
					</Not>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfMannequinMarker MarkerName="Magic_AimExit"/>
					<IfMannequinTag TagName="Prone_Desired"/>
					<IfMannequinTag TagName="Prone"/>
					<IfMannequinTag TagName="Crouch"/>
					<IsSilenced/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_DivineEmbrace" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<ForceCameraLock>
					<Default OnEnter="Enable" OnExit="NoEffect" MaxLockRange="25" TargetedSpellName="Spell_LifeStaff_DivineEmbrace"/>
				</ForceCameraLock>
				<IfThenElse ResetWhenReinstalled="true" Comment="Targeted Healing Exit">
					<IfCondition>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
					</IfCondition>
					<ThenActivity>
						<IfThenElse Comment="Targeting StickyLock Check">
							<IfCondition>
								<Not>
									<IfCameraStickyLockActive/>
								</Not>
							</IfCondition>
							<ThenActivity>
								<ForceCameraLock>
									<Default OnEnter="NoEffect" OnExit="Disable"/>
								</ForceCameraLock>
							</ThenActivity>
						</IfThenElse>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Input to Cast">
					<IfCondition>
						<And>
							<Or>
								<IfInput InputName="attack_shoot"/>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace"/>
								<And>
									<IfCameraLockActive/>
									<Or>
										<IfInput InputName="camera_lock_target_group1"/>
										<And>
											<IfInGroup/>
											<Or>
												<IfInput InputName="camera_lock_target_group2"/>
												<IfInput InputName="camera_lock_target_group3"/>
												<IfInput InputName="camera_lock_target_group4"/>
												<IfInput InputName="camera_lock_target_group5"/>
											</Or>
										</And>
									</Or>
								</And>
							</Or>
							<IfMannequinMarker MarkerName="Magic_IsReady_TOL"/>
							<Not>
								<Or>
									<IfInput InputName="aim_draw"/>
									<IfInput InputName="aim_draw_press"/>
									<IfInput InputName="block"/>
									<IfInput InputName="block_depressed"/>
								</Or>
							</Not>
							<IfMannequinTag TagName="Heal"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<IfThenElse ResetWhenReinstalled="false" Comment="Check Target Range">
								<IfCondition>
									<And>
										<IfCameraLockActive/>
										<Not>
											<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_DivineEmbrace"/>
										</Not>
									</And>
								</IfCondition>
								<ThenActivity>
									<ShowUINotification>
										<Default type="Minor" text="@inv_OutOfRangeNotification"/>
									</ShowUINotification>
								</ThenActivity>
								<ElseActivity>
									<Group>
										<DisableCameraLockTargetChange OnEnter="Disable" OnExit="NoAction"/>
										<IfThenElse ResetWhenReinstalled="false" Comment="Check Divine Embrace no mana upgrade">
											<IfCondition>
												<And>
													<IfExternalCondition ConditionName="ConditionCheckDivineEmbraceBase"/>
												</And>
											</IfCondition>
											<ThenActivity>
												<CastSpellRaycast SpellName="Spell_LifeStaff_DivineEmbrace"/>
											</ThenActivity>
										</IfThenElse>
										<IfThenElse ResetWhenReinstalled="false" Comment="Check Divine Embrace mana upgrade">
											<IfCondition>
												<And>
													<IfExternalCondition ConditionName="ConditionCheckDivineEmbraceReducedCost"/>
												</And>
											</IfCondition>
											<ThenActivity>
												<CastSpellRaycast SpellName="Spell_LifeStaff_DivineEmbrace_ReducedCost"/>
											</ThenActivity>
										</IfThenElse>
									</Group>
								</ElseActivity>
							</IfThenElse>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableCameraLockTargetChange OnEnter="NoAction" OnExit="Enable"/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Aim Tag">
					<IfCondition>
						<IfMannequinMarker MarkerName="UnsetAimTag"/>
					</IfCondition>
					<ThenActivity>
						<group Comment="LifeStaff unAim">
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Aim" OnEnter="Unset" OnExit="Unset" DelayTimer="0.0"/>
							</SetMannequinTag>
							<ExecuteAudioTrigger ResetWhenReinstalled="true" RunOnRemoteClients="true" IgnoreDataChanges="false">
								<Default AudioTriggerName="stop_staff_life_aim" ForceStopFxOnDataChange="false" ExecuteOnLocalPlayer="true" ExecuteOnRemotePlayer="true" AttachmentJointRtpcName="" AttachmentJoint="" AttachToEntity="true"/>
							</ExecuteAudioTrigger>
						</group>
					</ThenActivity>
					<ElseActivity>
						<group Comment="LifeStaff Aim">
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Aim" OnEnter="Set" OnExit="Unset" DelayTimer="0.0"/>
							</SetMannequinTag>
						</group>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle ToL Targeting Indicator">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="Magic_IsReadying_ToL"/>
							<IfMannequinTag TagName="Heal"/>
							<IfExternalCondition ConditionName="ConditionCheckDivineEmbraceBase"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_divine_targeting.dynamicslice" SpellName="Spell_LifeStaff_DivineEmbrace"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle ToL Mana Targeting Indicator">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="ConditionCheckDivineEmbraceReducedCost"/>
							<IfMannequinMarker MarkerName="Magic_IsReadying_ToL"/>
							<IfMannequinTag TagName="Heal"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_divine_targeting.dynamicslice" SpellName="Spell_LifeStaff_DivineEmbrace_ReducedCost"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Camera Relative Facing Logic">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="TurnInPlaceDisabled"/>
							<Not>
								<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Sprint"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="true" Comment="Show Broken Los Indicator">
					<IfCondition>
						<IfSpellLosFailClient/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ShowUINotification>
								<Default type="Minor" text="@inv_TargetOutsideLos"/>
							</ShowUINotification>
							<DisableCameraLockTargetChange OnEnter="Enable" OnExit="Enable"/>
						</Group>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_TouchOfLife_Cast" FragmentName="Ability_Life_Staff_TouchOfLife_Cast">
			<ActivationCondition>
				<And>
					<IfMannequinTag TagName="MagicStaff"/>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_DivineEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<And>
						<Or>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife_Aim"/>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife"/>
						</Or>
						<ActionConditionSpellSpawnLocationState Value="RaycastPassed"/>
						<IfMannequinMarker MarkerName="Magic_IsReadying_TOL"/>
					</And>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife_Cast"/>
					</Not>
					<And>
						<Not>
							<Or>
								<IfInput InputName="aim_draw"/>
								<IfInput InputName="aim_draw_press"/>
								<IfInput InputName="block"/>
								<IfInput InputName="block_depressed"/>
							</Or>
						</Not>
						<IfMannequinTag TagName="Heal"/>
					</And>
					<Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_TouchOfLife" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<And>
							<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_TouchOfLife_Mana_Upgrade" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
						</And>
					</Or>
					<Not>
						<Or>
							<IsSilenced/>
							<IfFragmentPlaying UseHostActionFragment="true"/>
							<IfInput InputName="Placing_Building"/>
						</Or>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Targeting StickyLock Check">
					<IfCondition>
						<Not>
							<IfCameraStickyLockActive/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ForceCameraLock>
							<Default OnEnter="NoEffect" OnExit="Disable"/>
						</ForceCameraLock>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<And>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Life_Staff_TouchOfLife_Cast"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_DivineEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_DivineEmbrace"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check LoS and range on target change">
					<IfCondition>
						<And>
							<IfCameraLockTargetChange/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<IfThenElse ResetWhenReinstalled="false" Comment="Check Target Range">
								<IfCondition>
									<And>
										<IfCameraLockActive/>
										<Not>
											<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_DivineEmbrace"/>
										</Not>
									</And>
								</IfCondition>
								<ThenActivity>
									<Group>
										<ShowUINotification>
											<Default type="Minor" text="@inv_OutOfRangeNotification"/>
										</ShowUINotification>
										<ChangeActionFragment ResetWhenReinstalled="true">
											<Default UseDefaultFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife_Outro"/>
										</ChangeActionFragment>
									</Group>
								</ThenActivity>
								<ElseActivity>
									<Group>
										<IfThenElse ResetWhenReinstalled="false" Comment="Check Divine Embrace no mana upgrade">
											<IfCondition>
												<And>
													<IfExternalCondition ConditionName="ConditionCheckDivineEmbraceBase"/>
												</And>
											</IfCondition>
											<ThenActivity>
												<CastSpellRaycast SpellName="Spell_LifeStaff_DivineEmbrace"/>
											</ThenActivity>
										</IfThenElse>
										<IfThenElse ResetWhenReinstalled="false" Comment="Check Divine Embrace mana upgrade">
											<IfCondition>
												<And>
													<IfExternalCondition ConditionName="ConditionCheckDivineEmbraceReducedCost"/>
												</And>
											</IfCondition>
											<ThenActivity>
												<CastSpellRaycast SpellName="Spell_LifeStaff_DivineEmbrace_ReducedCost"/>
											</ThenActivity>
										</IfThenElse>
									</Group>
								</ElseActivity>
							</IfThenElse>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="true" Comment="Show Broken Los Indicator">
					<IfCondition>
						<IfSpellLosFailClient/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ShowUINotification>
								<Default type="Minor" text="@inv_TargetOutsideLos"/>
							</ShowUINotification>
							<DisableCameraLockTargetChange OnEnter="Enable" OnExit="Enable"/>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_TouchOfLife_SelfCast" FragmentName="Ability_Life_Staff_TouchOfLife_SelfCast">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<IfInput InputName="self_target"/>
					</And>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_DivineEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_TouchOfLife" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						<And>
							<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_TouchOfLife_Mana_Upgrade" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
						</And>
					</Or>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_TouchOfLife"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
					</Not>
					<Not>
						<Or>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave_Loop"/>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HolyShield_Loop"/>
						</Or>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<Or>
							<IsSilenced/>
							<IfFragmentPlaying UseHostActionFragment="true"/>
							<IfInput InputName="Placing_Building"/>
						</Or>
					</Not>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_DivineEmbrace" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<And>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Life_Staff_TouchOfLife_SelfCast"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_DivineEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_DivineEmbrace"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Targeting StickyLock Check">
					<IfCondition>
						<Not>
							<IfCameraStickyLockActive/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ForceCameraLock>
							<Default OnEnter="NoEffect" OnExit="Disable"/>
						</ForceCameraLock>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_TouchOfLife_Channeling">
			<ActivationCondition>
				<IfMannequinMarker MarkerName="Ability_TouchOfLife_Channeling"/>
			</ActivationCondition>
			<DeactivationCondition>
				<Not>
					<IfMannequinMarker MarkerName="Ability_TouchOfLife_Channeling"/>
				</Not>
			</DeactivationCondition>
			<Activities>
				<ChannelSpell SpellName="LifeStaff_TouchOfLight_Channel"/>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_Speed_Intro" FragmentName="Ability_Life_Staff_Speed_Intro">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Life_Staff_Speed_Intro"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Life_Staff_Speed_Intro" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Life_Staff_Speed_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_Speed_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Life_Staff_Speed_Intro" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<PerformActiveAbility>
					<Default AbilityName="Ability_Life_Staff_Speed_Intro"/>
				</PerformActiveAbility>
				<ForceCameraLock>
					<Default OnEnter="Disable" OnExit="NoEffect"/>
				</ForceCameraLock>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="false" Comment="AlignToCamera">
					<IfCondition>
						<IfMannequinMarker MarkerName="AlignToCamera"/>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.50" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="AlignToCameraFast">
					<IfCondition>
						<IfMannequinMarker MarkerName="AlignToCameraFast"/>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate=".90" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="9,9,9" DisableGravity="false" InheritVelocity="false"/>
					<Conditional Name="InheritForwardVelocity" MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="12,12,12" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_Speed_Loop" FragmentName="Ability_Life_Staff_Speed_Loop" Predictive="true">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<SetCooldownTimer>
							<Default AbilityID="Ability_Life_Staff_Speed_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</SetCooldownTimer>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.0" RotationMultiplier="0.00" Decel="100.0,100.0,100.0" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
				<IfThenElse Comment="5mSpeed_Upgrade" ResetWhenReinstalled="true">
					<IfCondition>
						<IfExternalCondition ConditionName="SOL5mUpgrade"/>
					</IfCondition>
					<ThenActivity>
						<ChangeActionFragment ResetWhenReinstalled="true">
							<Default UseDefaultFragment="false" FragmentName="Ability_Life_Staff_Speed_Loop_5m_Upgrade"/>
						</ChangeActionFragment>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="10mSpeed_Upgrade" ResetWhenReinstalled="true">
					<IfCondition>
						<IfExternalCondition ConditionName="SOL10mUpgrade"/>
					</IfCondition>
					<ThenActivity>
						<ChangeActionFragment ResetWhenReinstalled="true">
							<Default UseDefaultFragment="false" FragmentName="Ability_Life_Staff_Speed_Loop_10m_Upgrade"/>
						</ChangeActionFragment>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_Speed_Stop" FragmentName="Ability_Life_Staff_Speed_Stop">
			<ActivationCondition>
				<Not>
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
			</DeactivationCondition>
			<Activities>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="1000.0,1000.0,1000.0" DisableGravity="false" InheritVelocity="false"/>
				</AnimationDrivenMotion>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_Smite" FragmentName="Ability_Life_Staff_Smite">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Life_Staff_Smite"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Life_Staff_Smite" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_Smite" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Life_Staff_Smite" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfMannequinMarker MarkerName="Magic_AimExit"/>
					<IfMannequinTag TagName="Prone_Desired"/>
					<IfMannequinTag TagName="Prone"/>
					<IfMannequinTag TagName="Crouch"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Life_Staff_Smite" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<PerformActiveAbility>
					<Default AbilityName="Ability_Life_Staff_Smite"/>
				</PerformActiveAbility>
				<ForceCameraLock>
					<Default OnEnter="Disable" OnExit="NoEffect"/>
				</ForceCameraLock>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Smite normal input">
					<IfCondition>
						<IfExternalCondition ConditionName="NoSmiteUpgrade_RayCast"/>
					</IfCondition>
					<ThenActivity>
						<CastSpellRaycast SpellName="LifeStaff_Smite"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check SMITE 15 POWER input">
					<IfCondition>
						<IfExternalCondition ConditionName="Smite15Upgrade_RayCast"/>
					</IfCondition>
					<ThenActivity>
						<CastSpellRaycast SpellName="LifeStaff_Smite_15prcntDamage_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check SMITE 30 POWER input">
					<IfCondition>
						<IfExternalCondition ConditionName="Smite30Upgrade_RayCast"/>
					</IfCondition>
					<ThenActivity>
						<CastSpellRaycast SpellName="LifeStaff_Smite_30prcntDamage_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Aim Tag">
					<IfCondition>
						<IfMannequinMarker MarkerName="UnsetAimTag"/>
					</IfCondition>
					<ThenActivity>
						<group Comment="LifeStaff unAim">
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Aim" OnEnter="Unset" OnExit="Unset" DelayTimer="0.0"/>
							</SetMannequinTag>
							<ExecuteAudioTrigger ResetWhenReinstalled="true" RunOnRemoteClients="true" IgnoreDataChanges="false">
								<Default AudioTriggerName="stop_staff_life_aim" ForceStopFxOnDataChange="false" ExecuteOnLocalPlayer="true" ExecuteOnRemotePlayer="true" AttachmentJointRtpcName="" AttachmentJoint="" AttachToEntity="true"/>
							</ExecuteAudioTrigger>
						</group>
					</ThenActivity>
					<ElseActivity>
						<group Comment="LifeStaff Aim">
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Aim" OnEnter="Set" OnExit="Unset" DelayTimer="0.0"/>
							</SetMannequinTag>
						</group>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Smite Targeting Indicator">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
							<IfMannequinTag TagName="Heal"/>
							<IfExternalCondition ConditionName="NoSmiteUpgrade_Unlocked"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_heal_targeting.dynamicslice" SpellName="LifeStaff_Smite"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle SMITE 15 POWER Targeting Indicator">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
							<IfMannequinTag TagName="Heal"/>
							<IfExternalCondition ConditionName="Smite15Upgrade_Unlocked"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_heal_targeting.dynamicslice" SpellName="LifeStaff_Smite_15prcntDamage_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle SMITE 30 POWER Targeting Indicator">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
							<IfMannequinTag TagName="Heal"/>
							<IfExternalCondition ConditionName="Smite30Upgrade_Unlocked"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_heal_targeting.dynamicslice" SpellName="LifeStaff_Smite_30prcntDamage_Upgrade"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Camera Relative Facing Logic">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="TurnInPlaceDisabled"/>
							<Not>
								<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Sprint"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="9,9,9" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_Smite_Cast" FragmentName="Ability_Life_Staff_Smite_Cast">
			<ActivationCondition>
				<And>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Life_Staff_Smite" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or>
						<And>
							<ActionConditionSpellSpawnLocationState Value="RaycastPassed"/>
							<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
						</And>
					</Or>
					<And>
						<Not>
							<Or>
								<IfInput InputName="aim_draw"/>
								<IfInput InputName="aim_draw_press"/>
								<IfInput InputName="block"/>
								<IfInput InputName="block_depressed"/>
							</Or>
						</Not>
						<IfMannequinTag TagName="Heal"/>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_Smite" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</And>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<SetCooldownTimer>
							<Default AbilityID="Ability_Life_Staff_Smite" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
						</SetCooldownTimer>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_HolyShield_Intro" FragmentName="Ability_Life_Staff_HolyShield_Intro">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_SplashofLight"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_SplashofLight" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_SplashofLight" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_HolyShield" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_SplashofLight" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<IfThenElse Comment="Targeting StickyLock Check">
					<IfCondition>
						<Not>
							<IfCameraStickyLockActive/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ForceCameraLock>
							<Default OnEnter="Disable" OnExit="NoEffect"/>
						</ForceCameraLock>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="20,20,20" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_HolyShield_Loop" FragmentName="Ability_Life_Staff_HolyShield_Loop">
			<ActivationCondition>
				<Not Comment="Only Activate through TransitionInstant">
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.0"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<TrackTimeInAction>
					<Default OnEnter="Enable" OnExit="ClearHitTracking"/>
				</TrackTimeInAction>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_SplashofLight" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_SplashofLight"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse Comment="Unset AttackAction on CanTransition" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinMarker MarkerName="CanTransition"/>
					</IfCondition>
					<ThenActivity>
						<SetMannequinTag ResetWhenReinstalled="false">
							<Default TagName="AttackAction" OnEnter="Unset" OnExit="NoEffect"/>
						</SetMannequinTag>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<IfThenElse Comment="Heal" ResetWhenReinstalled="false">
					<IfCondition>
						<And>
							<IfMannequinTag TagName="Heal"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpell>
							<Default SpellName="Spell_Ability_Lifestaff_SplashofLight"/>
						</CastSpell>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_HolyShield_Outro" FragmentName="Ability_Life_Staff_HolyShield_Outro">
			<ActivationCondition>
				<Not Comment="Only Activate through TransitionInstant">
					<True/>
				</Not>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="Aim" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Lifestaff_OrbofProtection_Cast" FragmentName="Ability_Life_Saff_OrbofProtection">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_OrbofProtection"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_OrbofProtection" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_OrbofProtection" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_OrbofLight" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<IfExternalCondition ConditionName="OrbOfProtection_Mana_Check"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.1"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_OrbofProtection" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<TrackTimeInAction>
					<Default OnEnter="Enable" OnExit="ClearHitTracking"/>
				</TrackTimeInAction>
				<ForceCameraLock>
					<Default OnEnter="Disable" OnExit="NoEffect"/>
				</ForceCameraLock>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="Ability_Startup"/>
						</Not>
					</IfCondition>
					<ThenActivity/>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Orb Projectile">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<Not>
								<IfAbilityActive AbilityName="Upgrade_Lifestaff_OrbofProtection_Aoe"/>
							</Not>
							<Not>
								<IfAbilityActive AbilityName="Upgrade_Lifestaff_OrbofProtection_Dmg"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Ability_LifeStaff_OrbofProtection"/>
							</CastSpell>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_OrbofProtection" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_OrbofProtection"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Orb Projectile">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_OrbofProtection_Dmg"/>
							<Not>
								<IfAbilityActive AbilityName="Upgrade_Lifestaff_OrbofProtection_Aoe"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Ability_LifeStaff_OrbofProtection_HOT"/>
							</CastSpell>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_OrbofProtection" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_OrbofProtection"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Orb Projectile Upgrade">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_OrbofProtection_Aoe"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Ability_LifeStaff_OrbofProtection_Upgrade"/>
							</CastSpell>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_OrbofProtection" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_OrbofProtection"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<AnimationDrivenMotion>
					<Default MotionMultiplier="1.00" RotationMultiplier="0.00" Decel="9,9,9" DisableGravity="false" InheritVelocity="true" InheritVelocityMaxSpeed="6"/>
				</AnimationDrivenMotion>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_LightsEmbrace" FragmentName="Ability_Life_Staff_LightsEmbrace">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<Not>
							<IfInput InputName="self_target"/>
						</Not>
					</And>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Or>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace_Aim"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace_Cast"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace_SelfCast"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
					</Not>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfMannequinMarker MarkerName="Magic_AimExit"/>
					<IfMannequinTag TagName="Prone_Desired"/>
					<IfMannequinTag TagName="Prone"/>
					<IfMannequinTag TagName="Crouch"/>
					<IsSilenced/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<BlockEnteringStore/>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_LightsEmbrace" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<ForceCameraLock>
					<Default OnEnter="Enable" OnExit="NoEffect" MaxLockRange="25" TargetedSpellName="Spell_LifeStaff_LightsEmbrace"/>
				</ForceCameraLock>
				<IfThenElse ResetWhenReinstalled="true" Comment="Targeted Healing Exit">
					<IfCondition>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
					</IfCondition>
					<ThenActivity>
						<IfThenElse Comment="Targeting StickyLock Check">
							<IfCondition>
								<Not>
									<IfCameraStickyLockActive/>
								</Not>
							</IfCondition>
							<ThenActivity>
								<ForceCameraLock>
									<Default OnEnter="NoEffect" OnExit="Disable"/>
								</ForceCameraLock>
							</ThenActivity>
						</IfThenElse>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check Input to Cast">
					<IfCondition>
						<And>
							<Or>
								<IfInput InputName="attack_shoot"/>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace"/>
								<And>
									<IfCameraLockActive/>
									<Or>
										<IfInput InputName="camera_lock_target_group1"/>
										<And>
											<IfInGroup/>
											<Or>
												<IfInput InputName="camera_lock_target_group2"/>
												<IfInput InputName="camera_lock_target_group3"/>
												<IfInput InputName="camera_lock_target_group4"/>
												<IfInput InputName="camera_lock_target_group5"/>
											</Or>
										</And>
									</Or>
								</And>
							</Or>
							<IfMannequinMarker MarkerName="Magic_IsReady_LightsEmbrace"/>
							<Not>
								<Or>
									<IfInput InputName="aim_draw"/>
									<IfInput InputName="aim_draw_press"/>
									<IfInput InputName="block"/>
									<IfInput InputName="block_depressed"/>
								</Or>
							</Not>
							<IfMannequinTag TagName="Heal"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<IfThenElse ResetWhenReinstalled="false" Comment="Check Target Range">
							<IfCondition>
								<And>
									<IfCameraLockActive/>
									<Not>
										<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_LightsEmbrace"/>
									</Not>
								</And>
							</IfCondition>
							<ThenActivity>
								<ShowUINotification>
									<Default type="Minor" text="@inv_OutOfRangeNotification"/>
								</ShowUINotification>
							</ThenActivity>
							<ElseActivity>
								<Group>
									<DisableCameraLockTargetChange OnEnter="Disable" OnExit="NoAction"/>
									<CastSpellRaycast SpellName="Spell_LifeStaff_LightsEmbrace"/>
								</Group>
							</ElseActivity>
						</IfThenElse>
					</ThenActivity>
				</IfThenElse>
				<DisableCameraLockTargetChange OnEnter="NoAction" OnExit="Enable"/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle Aim Tag">
					<IfCondition>
						<IfMannequinMarker MarkerName="UnsetAimTag"/>
					</IfCondition>
					<ThenActivity>
						<group Comment="LifeStaff unAim">
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Aim" OnEnter="Unset" OnExit="Unset" DelayTimer="0.0"/>
							</SetMannequinTag>
							<ExecuteAudioTrigger ResetWhenReinstalled="true" RunOnRemoteClients="true" IgnoreDataChanges="false">
								<Default AudioTriggerName="stop_staff_life_aim" ForceStopFxOnDataChange="false" ExecuteOnLocalPlayer="true" ExecuteOnRemotePlayer="true" AttachmentJointRtpcName="" AttachmentJoint="" AttachToEntity="true"/>
							</ExecuteAudioTrigger>
						</group>
					</ThenActivity>
					<ElseActivity>
						<group Comment="LifeStaff Aim">
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Aim" OnEnter="Set" OnExit="Unset" DelayTimer="0.0"/>
							</SetMannequinTag>
						</group>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Toggle ToL Targeting Indicator">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="Magic_IsReadying_LightsEmbrace"/>
							<IfMannequinTag TagName="Heal"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<CastSpellTargeting SliceName="slices/items/weapons/spell_aoe_divine_targeting.dynamicslice" SpellName="Spell_LifeStaff_LightsEmbrace"/>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Camera Relative Facing Logic">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="TurnInPlaceDisabled"/>
							<Not>
								<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Sprint"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.40" UseExponentialTurnRate="true" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
						</CameraRelativeFacing>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
				<IfThenElse ResetWhenReinstalled="true" Comment="Show Broken Los Indicator">
					<IfCondition>
						<IfSpellLosFailClient/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ShowUINotification>
								<Default type="Minor" text="@inv_TargetOutsideLos"/>
							</ShowUINotification>
							<DisableCameraLockTargetChange OnEnter="Enable" OnExit="Enable"/>
						</Group>
					</ThenActivity>
				</IfThenElse>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_LightsEmbrace_Cast" FragmentName="Ability_Life_Staff_LightsEmbrace_Cast">
			<ActivationCondition>
				<And>
					<IfMannequinTag TagName="MagicStaff"/>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<And>
						<Or>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace"/>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace_Aim"/>
						</Or>
						<ActionConditionSpellSpawnLocationState Value="RaycastPassed"/>
						<IfMannequinMarker MarkerName="Magic_IsReadying_LightsEmbrace"/>
					</And>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace_Cast"/>
					</Not>
					<And>
						<Not>
							<Or>
								<IfInput InputName="aim_draw"/>
								<IfInput InputName="aim_draw_press"/>
								<IfInput InputName="block"/>
								<IfInput InputName="block_depressed"/>
							</Or>
						</Not>
						<IfMannequinTag TagName="Heal"/>
					</And>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<Or>
							<IsSilenced/>
							<IfFragmentPlaying UseHostActionFragment="true"/>
							<IfInput InputName="Placing_Building"/>
						</Or>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Targeting StickyLock Check">
					<IfCondition>
						<Not>
							<IfCameraStickyLockActive/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ForceCameraLock>
							<Default OnEnter="NoEffect" OnExit="Disable"/>
						</ForceCameraLock>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<And>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Life_Staff_LightsEmbrace_Cast"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_LightsEmbrace"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Check LoS and range on target change">
					<IfCondition>
						<And>
							<IfCameraLockTargetChange/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<IfThenElse ResetWhenReinstalled="false" Comment="Check Target Range">
								<IfCondition>
									<And>
										<IfCameraLockActive/>
										<Not>
											<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_LightsEmbrace"/>
											&quot;/&gt;
                                        
										</Not>
									</And>
								</IfCondition>
								<ThenActivity>
									<Group>
										<ShowUINotification>
											<Default type="Minor" text="@inv_OutOfRangeNotification"/>
										</ShowUINotification>
										<ChangeActionFragment ResetWhenReinstalled="true">
											<Default UseDefaultFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace_Outro"/>
										</ChangeActionFragment>
									</Group>
								</ThenActivity>
								<ElseActivity>
									<Group>
										<CastSpellRaycast SpellName="Spell_LifeStaff_LightsEmbrace"/>
									</Group>
								</ElseActivity>
							</IfThenElse>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="true" Comment="Show Broken Los Indicator">
					<IfCondition>
						<IfSpellLosFailClient/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<ShowUINotification>
								<Default type="Minor" text="@inv_TargetOutsideLos"/>
							</ShowUINotification>
							<DisableCameraLockTargetChange OnEnter="Enable" OnExit="Enable"/>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<Or>
							<IfCameraLockActive/>
							<IfPlayerSetting PlayerSettingName="AttackFacing"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default/>
							<Conditional Name="ApplyRotation" TurnRate="0.40" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_LightsEmbrace_SelfCast" FragmentName="Ability_Life_Staff_LightsEmbrace_SelfCast">
			<ActivationCondition>
				<And>
					<And>
						<Or Comment="Backtick Check">
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace"/>
							<And>
								<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace" BackTicks="20"/>
								<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
							</And>
						</Or>
						<IfInput InputName="self_target"/>
					</And>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<Or>
						<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Or>
					<Not>
						<IfMannequinMarker MarkerName="Magic_AimExit"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_LightsEmbrace"/>
					</Not>
					<Not>
						<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Magic_LowerWeapon"/>
					</Not>
					<Not>
						<Or>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HealingWave_Loop"/>
							<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Ability_Life_Staff_HolyShield_Loop"/>
						</Or>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<Or>
							<IsSilenced/>
							<IfFragmentPlaying UseHostActionFragment="true"/>
							<IfInput InputName="Placing_Building"/>
						</Or>
					</Not>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<IfFragmentDone UseHostActionFragment="true"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_LightsEmbrace" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<IfThenElse ResetWhenReinstalled="false" Comment="Activate CoolDown after startup">
					<IfCondition>
						<And>
							<Not>
								<IfExternalCondition ConditionName="Ability_Startup"/>
							</Not>
							<IfFragmentPlaying UseHostActionFragment="true" FragmentName="Ability_Life_Staff_LightsEmbrace_SelfCast"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_LightsEmbrace"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Targeting StickyLock Check">
					<IfCondition>
						<Not>
							<IfCameraStickyLockActive/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ForceCameraLock>
							<Default OnEnter="Disable" OnExit="NoEffect"/>
						</ForceCameraLock>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<AIAudioTriggerActivity>
					<Default AudioTriggerName="Gun_Shot"/>
				</AIAudioTriggerActivity>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Ability_Life_Staff_LightsEmbrace_Channeling">
			<ActivationCondition>
				<IfMannequinMarker MarkerName="Ability_LightsEmbrace_Channeling"/>
			</ActivationCondition>
			<DeactivationCondition>
				<Not>
					<IfMannequinMarker MarkerName="Ability_LightsEmbrace_Channeling"/>
				</Not>
			</DeactivationCondition>
			<Activities>
				<ChannelSpell SpellName="LifeStaff_LightsEmbrace_Channel"/>
			</Activities>
		</Action>
		<Action Name="Ability_Lifestaff_Beacon" FragmentName="Ability_Life_Staff_Beacon">
			<ActivationCondition>
				<And>
					<Or Comment="Backtick Check">
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_Beacon"/>
						<And>
							<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_Beacon" BackTicks="20"/>
							<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
						</And>
					</Or>
					<Not>
						<IfCooldownTimer AbilityID="Ability_Lifestaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<IfExternalCondition ConditionName="Beacon_Mana_Check"/>
					</Not>
					<Or Comment="Stance Check">
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
						<IfMannequinTag TagName="Heal"/>
					</Or>
					<Not>
						<Or>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
							</And>
							<And>
								<Not>
									<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
								</Not>
								<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
							</And>
							<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
							<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
						</Or>
					</Not>
					<Not>
						<IfExternalCondition ConditionName="Throwable_Equipped"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="FishingPole"/>
					</Not>
					<Not>
						<IfInput InputName="Placing_Building"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="AttackAction"/>
					</Not>
					<Not>
						<IfMannequinTagInItemSlot TagName="Tool" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
					</Not>
					<IfCanResizeCharacterController ResizeType="Default"/>
					<Not>
						<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
					</Not>
					<IfHasWeaponPrerequisites WeaponSlot="ACTIVE_MAIN_HAND_WEAPON"/>
					<Not>
						<HeightToGround ActivationHeight="0.5"/>
					</Not>
					<Not>
						<IfEncumbered/>
					</Not>
					<Not>
						<IsSilenced/>
					</Not>
					<Not>
						<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfFragmentDone UseHostActionFragment="true" ExitOffsetSeconds="0.1"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToRemoveOnEnter>
							<EffectId EffectId="PotionHaste"/>
						</EffectsToRemoveOnEnter>
					</Default>
				</ModifyStatusEffects>
				<IfThenElse Comment="On Attack start set Stand_Desired if Standing" ResetWhenReinstalled="false">
					<IfCondition>
						<IfMannequinTag TagName="Stand"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_alternate_depressed_virtual" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="rune_ability" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability1" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability1" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability2" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability2" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="ability3" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="ability3" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_primary_virtual" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="attack_shoot" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="attack_shoot" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_hold" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<ClearInput>
					<Default InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="NoEffect"/>
					<Conditional Name="Unsheathe_Input_Pressed" InputName="aim_shoot_depressed" OnEnter="NoEffect" OnExit="Clear"/>
				</ClearInput>
				<BlockEnteringStore/>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply sprint delay only on ranged attacks">
					<IfCondition>
						<Not>
							<IfExternalCondition ConditionName="IsMelee"/>
						</Not>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Sprint_Delay_Timer"/>
								</EffectsToApplyOnEnter>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Apply melee stamina regen attribute threshold bonus">
					<IfCondition>
						<And>
							<IfExternalCondition ConditionName="Allow_Stamina_Regen_Bonus"/>
							<IfExternalCondition ConditionName="IsMelee"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<ModifyStatusEffects>
							<Default>
								<EffectsToApplyOnEnter>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToApplyOnEnter>
								<EffectsToRemoveOnExit>
									<EffectId EffectId="Attack_Regen_Bonus"/>
								</EffectsToRemoveOnExit>
							</Default>
						</ModifyStatusEffects>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Unsheathe active weapon and set tags from sheathed">
					<IfCondition>
						<IfExternalCondition ConditionName="Trigger_From_Sheathed"/>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SheatheWeapon ResetWhenReinstalled="false">
								<Default SheatheOption="UnSheathe" SlotToSheathe="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SheatheWeapon>
							<SetMannequinTagFromSource ResetWhenReinstalled="false" Comment="Set Main Hand Tags">
								<Default TagSource="PaperdollSlot" SourceSlot="ACTIVE_MAIN_HAND_WEAPON" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTagFromSource>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="AutoUnsheathe" OnEnter="NoEffect" OnExit="Unset"/>
							</SetMannequinTag>
							<ChangeActionFragment ResetWhenReinstalled="false">
								<Default UseDefaultFragment="true"/>
							</ChangeActionFragment>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse Comment="Stand if crouching or prone" ResetWhenReinstalled="false">
					<IfCondition>
						<Or>
							<IfMannequinTag TagName="Crouch"/>
							<IfMannequinTag TagName="Prone"/>
						</Or>
					</IfCondition>
					<ThenActivity>
						<Group>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
							<SetMannequinTag ResetWhenReinstalled="false">
								<Default TagName="Stand_Desired" OnEnter="Set" OnExit="NoEffect"/>
							</SetMannequinTag>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<ClearActiveAbilityMoveInput>
					<Default AbilityName="Ability_Lifestaff_Beacon" OnEnter="Clear" OnExit="NoEffect"/>
				</ClearActiveAbilityMoveInput>
				<ForceCameraLock>
					<Default OnEnter="Disable" OnExit="NoEffect"/>
				</ForceCameraLock>
				<IfThenElse Comment="Character Facing Logic">
					<IfCondition>
						<And>
							<Or>
								<IfCameraLockActive/>
								<IfPlayerSetting PlayerSettingName="AttackFacing"/>
								<IfExternalCondition ConditionName="CombatNav"/>
							</Or>
						</And>
					</IfCondition>
					<ThenActivity>
						<CameraRelativeFacing>
							<Default TurnRate="0.0" UseExponentialTurnRate="false" UseCameraDirOnEnterState="false" UseClosestTarget="false"/>
							<Conditional Name="ApplyRotationDuringCameraLockFast" TurnRate="0.90" UseExponentialTurnRate="true"/>
							<Conditional Name="ApplyRotationDuringCameraLock" TurnRate="0.25" UseExponentialTurnRate="true"/>
						</CameraRelativeFacing>
					</ThenActivity>
					<ElseActivity>
						<InputRelativeFacing>
							<Default TurnRate="0.0" UseExponentialTurnRate="false" RepeatInitialInput="false" UseClosestTarget="false" ForwardInput="moveforward" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="None"/>
							<Conditional Name="ApplyRotation" TurnRate="960.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
							<Conditional Name="ApplyRotationFast" TurnRate="50000.00" ForwardInput="ForwardNav" BackwardInput="moveback" LeftInput="moveleft" RightInput="moveright" AnalogInputOverride="LeftAnalog"/>
						</InputRelativeFacing>
					</ElseActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Beacon Projectile Base">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<Not>
								<Or>
									<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_AoeInc"/>
									<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_DurOnLow"/>
									<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_AddHaste"/>
								</Or>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Ability_Lifestaff_Beacon_Projectile"/>
							</CastSpell>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_Beacon"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Beacon Projectile Range Increase">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_AoeInc"/>
							<Not>
								<Or>
									<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_DurOnLow"/>
									<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_AddHaste"/>
								</Or>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Ability_Lifestaff_Beacon_Projectile_Upgrade"/>
							</CastSpell>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_Beacon"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Beacon Projectile Duration Increase">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_DurOnLow"/>
							<Not>
								<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_AddHaste"/>
							</Not>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Ability_Lifestaff_Beacon_Projectile_Upgrade2"/>
							</CastSpell>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_Beacon"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<IfThenElse ResetWhenReinstalled="false" Comment="Cast Beacon Projectile Haste">
					<IfCondition>
						<And>
							<IfMannequinMarker MarkerName="CastHealProjectile"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_DurOnLow"/>
							<IfAbilityActive AbilityName="Upgrade_Lifestaff_Protection_AddHaste"/>
						</And>
					</IfCondition>
					<ThenActivity>
						<Group>
							<CastSpell>
								<Default SpellName="Spell_Ability_Lifestaff_Beacon_Projectile_Upgrade3"/>
							</CastSpell>
							<SetCooldownTimer>
								<Default AbilityID="Ability_Lifestaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
							</SetCooldownTimer>
							<PerformActiveAbility>
								<Default AbilityName="Ability_Lifestaff_Beacon"/>
							</PerformActiveAbility>
						</Group>
					</ThenActivity>
				</IfThenElse>
				<DisableInteractor>
					<Default OnEnter="Disable" OnExit="Enable"/>
				</DisableInteractor>
				<SetMannequinTag ResetWhenReinstalled="false">
					<Default TagName="AttackAction" OnEnter="Set" OnExit="Unset"/>
				</SetMannequinTag>
			</Activities>
		</Action>
		<Action Name="Passive_Lifestaff_Protection_HasteWhenLow_Detect">
			<ActivationCondition>
				<And>
					<IfDamagedByPowerLevel Comparison="GreaterThanOrEqual" Value="0" FailOnNoReactionDamage="true"/>
					<IfHealthPercentage Comparison="LessThan" Percentage="0.5"/>
					<IfAbilityActive AbilityName="Passive_Lifestaff_Protection_HasteWhenLow"/>
					<IfMannequinTag TagName="MagicStaff"/>
					<IfMannequinTag TagName="Heal"/>
					<Not>
						<IfHasStatusEffect StatusEffect="Status_Passive_Lifestaff_Protection_HasteWhenLow_Timer"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<IfHasStatusEffect StatusEffect="Status_Passive_Lifestaff_Protection_HasteWhenLow_Timer"/>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Status_Passive_Lifestaff_Protection_HasteWhenLow"/>
							<EffectId EffectId="Status_Passive_Lifestaff_Protection_HasteWhenLow_Timer"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnExit/>
					</Default>
				</ModifyStatusEffects>
			</Activities>
		</Action>
		<Action Name="HealingAura">
			<ActivationCondition>
				<And>
					<IfMannequinTag TagName="MagicStaff"/>
					<IfMannequinTag TagName="Heal"/>
					<IfDamagedByPowerLevel Comparison="GreaterThanOrEqual" Value="0" FailOnNoReactionDamage="true"/>
					<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_AoeHealWhenHit"/>
					<Not>
						<IfHasStatusEffect StatusEffect="Status_Passive_Lifestaff_Healing_AoeHealWhenHit_Timer"/>
					</Not>
				</And>
			</ActivationCondition>
			<DeactivationCondition>
				<Or>
					<Not>
						<IfMannequinTag TagName="Heal"/>
					</Not>
					<Not>
						<IfMannequinTag TagName="MagicStaff"/>
					</Not>
					<IfHasStatusEffect StatusEffect="Status_Passive_Lifestaff_Healing_AoeHealWhenHit_Timer"/>
				</Or>
			</DeactivationCondition>
			<Activities>
				<ModifyStatusEffects>
					<Default>
						<EffectsToApplyOnEnter>
							<EffectId EffectId="Status_Passive_Lifestaff_Healing_AoeHealWhenHit_Timer"/>
						</EffectsToApplyOnEnter>
						<EffectsToRemoveOnExit/>
					</Default>
				</ModifyStatusEffects>
				<CastSpell>
					<Default SpellName="Spell_Passive_Lifestaff_Healing_AoeHealWhenHit" TakeDurability="false"/>
				</CastSpell>
			</Activities>
		</Action>
	</Actions>
	<Conditions>
		<And Name="Magic_Channel_Interrupted">
			<Or>
				<And>
					<IfMannequinTag TagName="MagicStaff"/>
					<Or>
						<IfInput InputName="aim_draw_press"/>
						<IfInput InputName="aim_draw_release"/>
						<IfInput InputName="aim_draw"/>
						<IfInput InputName="block"/>
						<IfInput InputName="block_depressed"/>
					</Or>
				</And>
				<ActionConditionSpellSpawnLocationState Value="RaycastFailed"/>
			</Or>
		</And>
		<And Name="Magic_Channel_Intro_Done">
			<IfMannequinTag TagName="MagicStaff"/>
			<Or>
				<IfFragmentPlaying UseHostActionFragment="false" FragmentName="Life_Staff_Channel_Intro"/>
			</Or>
		</And>
		<And Name="Magic_Aim">
			<Not>
				<And>
					<IfMannequinTag TagName="MagicGauntlet"/>
					<IfMannequinTag TagName="Heal"/>
				</And>
			</Not>
			<Or>
				<IfMannequinTag TagName="MagicGauntlet"/>
				<IfMannequinTag TagName="MagicStaff"/>
			</Or>
			<And>
				<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_HealingWave" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
				<IfMeetsManaCost/>
			</And>
			<IfInput InputName="aim_draw"/>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Base">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_Dmg"/>
					<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
				</Or>
			</Not>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Base_NoTarget">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_Dmg"/>
					<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
				</Or>
			</Not>
			<Not>
				<IfCameraLockActive/>
			</Not>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Base_RangeCheck">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_Dmg"/>
					<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
				</Or>
			</Not>
			<IfCameraLockActive/>
			<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_SacredGround"/>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Upgrade">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_Dmg"/>
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
			</Not>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Upgrade_NoTarget">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_Dmg"/>
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
			</Not>
			<Not>
				<IfCameraLockActive/>
			</Not>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Upgrade_RangeCheck">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_Dmg"/>
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
			</Not>
			<IfCameraLockActive/>
			<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_SacredGround_Upgrade"/>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Upgrade2">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Upgrade2_NoTarget">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
			<Not>
				<IfCameraLockActive/>
			</Not>
		</And>
		<And Name="Condition_Lifestaff_ScaredGround_Upgrade2_RangeCheck">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_ScaredGround_DmgOnEnd"/>
			<IfCameraLockActive/>
			<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_SacredGround_Upgrade2"/>
		</And>
		<And Name="NoTouchOfLightUpgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="TOL10prcntManaReduction"/>
					<IfAbilityActive AbilityName="TOLPlus20prcntBuffIncrease"/>
				</Or>
			</Not>
		</And>
		<And Name="TouchOfLightManaReduction">
			<IfAbilityActive AbilityName="TOL10prcntManaReduction"/>
			<Not>
				<IfAbilityActive AbilityName="TOLPlus20prcntBuffIncrease"/>
			</Not>
		</And>
		<And Name="TouchOfLightBuffUpgrade">
			<And>
				<IfAbilityActive AbilityName="TOL10prcntManaReduction"/>
				<IfAbilityActive AbilityName="TOLPlus20prcntBuffIncrease"/>
			</And>
		</And>
		<And Name="ConditionCheckDivineEmbraceBase">
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
			</Not>
		</And>
		<And Name="ConditionCheckDivineEmbraceBaseNoTarget">
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
			</Not>
			<Not>
				<IfCameraLockActive/>
			</Not>
		</And>
		<And Name="ConditionCheckDivineEmbraceBaseRangeCheck">
			<Not>
				<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
			</Not>
			<IfCameraLockActive/>
			<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_DivineEmbrace"/>
		</And>
		<And Name="ConditionCheckDivineEmbraceReducedCost">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
		</And>
		<And Name="ConditionCheckDivineEmbraceReducedCostNoTarget">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
			<Not>
				<IfCameraLockActive/>
			</Not>
		</And>
		<And Name="ConditionCheckDivineEmbraceReducedCostRangeCheck">
			<IfAbilityActive AbilityName="Upgrade_Lifestaff_DivineEmbrace_ReduceCost"/>
			<IfCameraLockActive/>
			<IfCameraLockTargetInSpellRange SpellName="Spell_LifeStaff_DivineEmbrace_ReducedCost"/>
		</And>
		<And Name="HolyShieldRadiusUpgrade">
			<IfAbilityActive AbilityName="HolyPlus5mRadius"/>
			<Not>
				<IfAbilityActive AbilityName="Holy10prcntManaReduce"/>
			</Not>
		</And>
		<And Name="HolyShieldManaUpgrade">
			<IfAbilityActive AbilityName="Holy10prcntManaReduce"/>
			<IfAbilityActive AbilityName="HolyPlus5mRadius"/>
		</And>
		<And Name="HolyShieldKickout">
			<IfMannequinTag TagName="Heal"/>
			<IfManaCost ComparisonType="LessThanOrEqual" CostID="LifeStaff_HolyShield_Kickout" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
		</And>
		<And Name="NoHolyShieldUpgrade">
			<Not>
				<IfAbilityActive AbilityName="HolyPlus5mRadius"/>
			</Not>
		</And>
		<And Name="NoSOLUpgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="SOL5mPlusRange"/>
					<IfAbilityActive AbilityName="SOL10mPlusRange"/>
				</Or>
			</Not>
		</And>
		<And Name="SOL5mUpgrade">
			<IfAbilityActive AbilityName="SOL5mPlusRange"/>
			<Not>
				<IfAbilityActive AbilityName="SOL10mPlusRange"/>
			</Not>
		</And>
		<And Name="SOL10mUpgrade">
			<IfAbilityActive AbilityName="SOL10mPlusRange"/>
		</And>
		<And Name="SmiteCast">
			<IfInput InputName="attack_shoot"/>
			<IfMannequinTag TagName="Heal"/>
			<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
			<Not>
				<Or>
					<IfInput InputName="aim_draw"/>
					<IfInput InputName="aim_draw_press"/>
					<IfInput InputName="block"/>
					<IfInput InputName="block_depressed"/>
				</Or>
			</Not>
			<Or>
				<And>
					<ActionConditionSpellSpawnLocationState Value="RaycastPassed"/>
					<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
				</And>
				<And>
					<ActionConditionSpellSpawnLocationState Value="RaycastNone"/>
				</And>
			</Or>
		</And>
		<And Name="NoSmiteUpgrade_Unlocked">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="SmitePlus15prcntSpellPower"/>
					<IfAbilityActive AbilityName="SmitePlus25prcntSpellPower"/>
				</Or>
			</Not>
		</And>
		<And Name="Smite15Upgrade_Unlocked">
			<IfAbilityActive AbilityName="SmitePlus15prcntSpellPower"/>
			<Not>
				<IfAbilityActive AbilityName="SmitePlus25prcntSpellPower"/>
			</Not>
		</And>
		<And Name="Smite30Upgrade_Unlocked">
			<IfAbilityActive AbilityName="SmitePlus25prcntSpellPower"/>
		</And>
		<And Name="NoSmiteUpgrade_RayCast">
			<And>
				<IfInput InputName="attack_shoot"/>
				<IfMannequinTag TagName="Heal"/>
				<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
				<Not>
					<Or>
						<IfInput InputName="aim_draw"/>
						<IfInput InputName="aim_draw_press"/>
						<IfInput InputName="block"/>
						<IfInput InputName="block_depressed"/>
					</Or>
				</Not>
			</And>
			<Not>
				<Or>
					<IfAbilityActive AbilityName="SmitePlus15prcntSpellPower"/>
					<IfAbilityActive AbilityName="SmitePlus25prcntSpellPower"/>
				</Or>
			</Not>
		</And>
		<And Name="Smite15Upgrade_RayCast">
			<And>
				<IfInput InputName="attack_shoot"/>
				<IfMannequinTag TagName="Heal"/>
				<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
				<Not>
					<Or>
						<IfInput InputName="aim_draw"/>
						<IfInput InputName="aim_draw_press"/>
						<IfInput InputName="block"/>
						<IfInput InputName="block_depressed"/>
					</Or>
				</Not>
			</And>
			<IfAbilityActive AbilityName="SmitePlus15prcntSpellPower"/>
			<Not>
				<IfAbilityActive AbilityName="SmitePlus25prcntSpellPower"/>
			</Not>
		</And>
		<And Name="Smite30Upgrade_RayCast">
			<And>
				<IfInput InputName="attack_shoot"/>
				<IfMannequinTag TagName="Heal"/>
				<IfMannequinMarker MarkerName="Magic_IsReadying_Smite"/>
				<Not>
					<Or>
						<IfInput InputName="aim_draw"/>
						<IfInput InputName="aim_draw_press"/>
						<IfInput InputName="block"/>
						<IfInput InputName="block_depressed"/>
					</Or>
				</Not>
			</And>
			<IfAbilityActive AbilityName="SmitePlus25prcntSpellPower"/>
		</And>
		<And Name="Siphon_Disconnect">
			<IfMannequinMarker MarkerName="Magic_IsReadying_Siphon"/>
			<Not>
				<Or>
					<IfHasStatusEffect StatusEffect="LifeStaff_ManaGain_Siphon"/>
					<IfHasStatusEffect StatusEffect="LifeStaff_ManaGain_Armor_Siphon"/>
					<IfHasStatusEffect StatusEffect="LifeStaff_ManaGain_Super_Siphon"/>
				</Or>
			</Not>
			<Not>
				<Or>
					<IfHasStatusEffect StatusEffect="LifeStaff_ManaDrain_Siphon"/>
					<IfHasStatusEffect StatusEffect="LifeStaff_ManaDrain_Armor_Siphon"/>
					<IfHasStatusEffect StatusEffect="LifeStaff_ManaDrain_Super_Siphon"/>
				</Or>
			</Not>
		</And>
		<And Name="NoSiphonUpgrade">
			<Not>
				<Or>
					<IfAbilityActive AbilityName="SiphonPlus3mRange"/>
					<IfAbilityActive AbilityName="SiphonPlus10Armor"/>
					<IfAbilityActive AbilityName="SuperSiphon"/>
				</Or>
			</Not>
		</And>
		<And Name="SiphonCastRangeUpgrade">
			<IfAbilityActive AbilityName="SiphonPlus3mRange"/>
			<Not>
				<IfAbilityActive AbilityName="SuperSiphon"/>
			</Not>
			<Not>
				<IfAbilityActive AbilityName="SiphonPlus10Armor"/>
			</Not>
		</And>
		<And Name="SiphonCastArmorUpgrade">
			<IfAbilityActive AbilityName="SiphonPlus3mRange"/>
			<IfAbilityActive AbilityName="SiphonPlus10Armor"/>
			<Not>
				<IfAbilityActive AbilityName="SuperSiphon"/>
			</Not>
		</And>
		<And Name="SiphonCastSuperUpgrade">
			<IfAbilityActive AbilityName="SuperSiphon"/>
		</And>
		<And Name="Siphon_Healing_Mana_Check">
			<IfManaCost ComparisonType="LessThanOrEqual" CostID="Siphon_Healing_Mana_Check" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<IfMeetsManaCost/>
		</And>
		<And Name="Beacon_Mana_Check">
			<IfManaCost ComparisonType="LessThanOrEqual" CostID="LifeStaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<IfMeetsManaCost/>
		</And>
		<And Name="OrbOfProtection_Mana_Check">
			<IfManaCost ComparisonType="LessThanOrEqual" CostID="LifeStaff_OrbofLight" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<IfMeetsManaCost/>
		</And>
		<Or Name="CanAttack_Light_LifeStaff">
			<And>
				<Not>
					<IfInput InputName="attack_primary"/>
				</Not>
				<Not>
					<IfInput InputName="attack_primary_hold"/>
				</Not>
			</And>
			<And>
				<Or>
					<IfInput InputName="attack_primary"/>
					<IfInput InputName="attack_primary_hold"/>
				</Or>
				<Not>
					<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_NoManaOnBasic"/>
				</Not>
				<IfManaCost ComparisonType="LessThan" CostID="LifeStaff_Heavy" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</And>
		</Or>
		<And Name="CanAttack_Heavy_LifeStaff">
			<Or>
				<IfAbilityActive AbilityName="Passive_Lifestaff_Healing_NoManaOnBasic"/>
				<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_Heavy" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Or>
		</And>
		<And Name="CanAttack_HealingWave">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfInput InputName="self_target"/>
				</Not>
			</And>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_HealingWave" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_ScaredGround" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_HealingWave_Self">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_ScaredGround" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<IfInput InputName="self_target"/>
			</And>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_HealingWave" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_ScaredGround" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_HolyShield">
			<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_SplashofLight"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_HolyShield" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_SplashofLight" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_TouchOfLife">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfInput InputName="self_target"/>
				</Not>
			</And>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_TouchOfLife" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_DivineEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_TouchOfLife_Self">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_DivineEmbrace" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<IfInput InputName="self_target"/>
			</And>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_TouchOfLife" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_DivineEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_LightsEmbrace">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<Not>
					<IfInput InputName="self_target"/>
				</Not>
			</And>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_LightsEmbrace_Self">
			<And>
				<Or Comment="Backtick Check">
					<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace"/>
					<And>
						<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_LightsEmbrace" BackTicks="20"/>
						<IfActionStatus ActionName="UseBacktickInputs" Status="Installed"/>
					</And>
				</Or>
				<IfInput InputName="self_target"/>
			</And>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_LightsEmbrace" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_LifeSpeed">
			<IfActiveAbilityMoveName AbilityName="Ability_Life_Staff_Speed_Intro"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_Speed_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Life_Staff_Speed_Intro" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Smite">
			<IfActiveAbilityMoveName AbilityName="Ability_Life_Staff_Smite"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_Smite" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Life_Staff_Smite" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_Beacon">
			<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_Beacon"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_Beacon" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="CanAttack_OrbofProtection">
			<IfActiveAbilityMoveName AbilityName="Ability_Lifestaff_OrbofProtection"/>
			<IfManaCost ComparisonType="GreaterThanOrEqual" CostID="LifeStaff_OrbofLight" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			<Not>
				<IfCooldownTimer AbilityID="Ability_Lifestaff_OrbofProtection" SlotToCheckAlias="ACTIVE_MAIN_HAND_WEAPON"/>
			</Not>
			<Not>
				<Or>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_1" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_1" BackTicks="20"/>
					</And>
					<And>
						<Not>
							<IfItemInSlot SlotToCheckAlias="MAIN_HAND_OPTION_2" RequireSlotValid="true" RequireSlotActive="true"/>
						</Not>
						<IfInput InputName="Use_MainHandSlot_2" BackTicks="20"/>
					</And>
					<IfInput InputName="quickslot-weaponSwap" BackTicks="20"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Unsheathe_MainHand_2_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_1_UB" Status="Pending"/>
					<IfActionStatus ActionName="Switch_MainHand_2_UB" Status="Pending"/>
				</Or>
			</Not>
			<Not>
				<IfMannequinTag TagName="Tool"/>
			</Not>
			<IfCanResizeCharacterController ResizeType="Default"/>
			<Not>
				<HeightToGround ActivationHeight="0.5"/>
			</Not>
			<Not>
				<IfWaterDepth Comparison="GreaterThan" WaterDepth="Shallow"/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
			<Not>
				<IfEncumbered/>
			</Not>
			<Not>
				<IsSilenced/>
			</Not>
			<Not>
				<IfHasStatusEffect StatusEffect="PreventAttacksAndAbilities"/>
			</Not>
		</And>
		<And Name="Self_Heal">
			<IfInput InputName="self_target"/>
		</And>
	</Conditions>
</ActionList>

